<div class="flex flex-col space-y-6 max-w-4xl mx-auto mt-10">
  
  <div class="text-center">
    <h1 class="text-4xl font-bold text-gray-800 tracking-tight">Job History</h1>
    <p class="text-gray-500 mt-2">All your logged jobs</p>
  </div>

  <div class="mb-4">
    <%= link_to "â† Back to Home", root_path, class: "text-blue-600 hover:text-blue-800 font-medium" %>
  </div>

  <% if @logs.any? %>
    <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200">
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b">Date</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b">Client</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b">Time</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b">Tasks</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b">Materials</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% @logs.each do |log| %>
              <tr class="hover:bg-gray-50">
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  <%= log.date.presence || '-' %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  <%= log.client.presence || '-' %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  <%= log.time.presence || '-' %>
                </td>
                <td class="px-6 py-4 text-sm text-gray-700">
                  <% 
                    tasks = begin
                      JSON.parse(log.tasks || '[]')
                    rescue
                      []
                    end
                  %>
                  <% if tasks.any? %>
                    <ul class="list-disc list-inside space-y-1">
                      <% tasks.each do |task| %>
                        <li><%= task %></li>
                      <% end %>
                    </ul>
                  <% else %>
                    <span class="text-gray-400">-</span>
                  <% end %>
                </td>
                <td class="px-6 py-4 text-sm text-gray-700">
                  <% 
                    materials = begin
                      JSON.parse(log.materials || '[]')
                    rescue
                      []
                    end
                  %>
                  <% if materials.any? %>
                    <ul class="list-disc list-inside space-y-1">
                      <% materials.each do |material| %>
                        <li><%= material %></li>
                      <% end %>
                    </ul>
                  <% else %>
                    <span class="text-gray-400">-</span>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  <% else %>
    <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-8 text-center">
      <p class="text-gray-500 text-lg">No logs yet. Start recording your first job!</p>
      <%= link_to "Record Job", root_path, class: "mt-4 inline-block bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors" %>
    </div>
  <% end %>
</div>
